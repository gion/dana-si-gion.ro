"use strict";!function(a,b,c,d,e,f,g,h,i){c(document).ready(function(c){function j(){var d=c(a),e=1100,f=d.height(),g=c(".scrollContent").outerHeight();b.backgroundScene.duration(g-f/2),b.bikeScene.duration(g-f/2),c.each(k,function(a,b){c(b.triggerElement())}),c(".scene-element-wrapper").width(e),c(".scene-element").css("transformOrigin",e/2+"px "+f/2+"px"),c("#origin-helper").css({top:f/2+(c(".scene.active .scene-element-wrapper").length?c(".scene.active .scene-element-wrapper").offset().top:0),left:e/2})}c("#bullets").on("click",".bullet",function(a){var d=c(a.target).index();console.log(d,a.target),b.goToScene(d)}),b.animateScroll=function(a,e){b.animateScroll.tween&&b.animateScroll.tween.kill(),console.log("animate scroll",a);var f=c(".scrollContainer").get(0),g={y:f.scrollTop};b.animateScroll.tween=d.to(g,e||3,{y:a,onUpdate:function(){f.scrollTop=g.y}})},b.goToScene=function(a){var d=c(".scene:not(.fixed)").eq(a);return d.length?(console.log("go to scene",a),void b.animateScroll(d.offset().top)):(console.error("not a valid index scene",a),!1)};var k=b.scenes=[],l=b.controller=new f({container:"#example-wrapper"}),m=d.to("#mobileadvanced #hill",1,{rotation:"-720deg"}),n=b.backgroundScene=new g({triggerElement:c("#background").get(0),duration:c(".scrollContent").height()}).setTween(m).setPin("#mobileadvanced",{pushFollowers:!1}).addTo(l);if(n.on("enter",function(){c("body").removeClass("finished"),c(n.triggerElement()).addClass("active"),console.log("enter",n.triggerElement())}),n.on("leave",function(){c(n.triggerElement()).removeClass("active"),c("body").addClass("finished"),console.info("leave",n.triggerElement())}),c(".scene.fixed:last").each(function(a,e){var f=new g({triggerElement:e,duration:c(".scrollContent").height(),offset:-200});c(".scene-element-wrapper",e).each(function(a,b){var e=c(".scene-element",b).get(0);f.setPin(b,{pushFollowers:!1}).setTween(d.fromTo(e,1,{rotation:"-125deg"},{rotation:"125deg"}))}),f.on("enter",function(){c(f.triggerElement()).addClass("active"),console.log("enter",f.triggerElement())}),f.on("leave",function(){c(f.triggerElement()).removeClass("active"),console.info("leave",f.triggerElement())}),b.bikeScene=f,f.addTo(l)}),c(".scene:not(.fixed)").each(function(a,b){var f=new g({triggerElement:b,offset:-200,duration:c(b).data("duration")||c(b).height()}),h=new e;c(".scene-element-wrapper",b).each(function(a,b){console.log(a,b);var e=c(".scene-element",b).get(0),f=(c(".scene-description",b),d.fromTo(e,1,{rotation:"135deg"},{rotation:"-135deg"}));h.add(f)}),f.on("enter",function(){c(f.triggerElement()).addClass("active");var a=k.indexOf(f);c("#bullets .bullet").removeClass("active").eq(a).addClass("active"),console.log("enter",f.triggerElement())}),f.on("leave",function(){c(f.triggerElement()).removeClass("active"),console.info("leave",f.triggerElement())}),f.setTween(h),f.addTo(l),k.push(f)}),h.touch){var o=new i("#example-wrapper",{scrollX:!1,scrollY:!0,scrollbars:!0,useTransform:!1,useTransition:!1,probeType:3});l.scrollPos(function(){return-o.y}),o.on("scroll",function(){l.update()})}c.each(b.scenes,function(){c('<li class="bullet cursor-pointer"></li>').appendTo("#bullets")}),c(a).on("resize",j),j()})}(this,this.api=this.api||{},this.jQuery,this.TweenMax,this.TimelineMax,this.ScrollMagic,this.ScrollScene,this.Modernizr,this.IScroll);